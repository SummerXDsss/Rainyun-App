# 更新日志

本文档记录了 Rainyun App 的所有重要变更。

## [0.1.0] - 2026-01-08

### ✨ 新功能

#### 🖥️ 服务器管理
- **服务器详情页**：完整的服务器信息展示
- **服务器控制**：开机、关机、重启操作
- **带宽监控**：实时带宽占用率 + 12小时历史图表
- **防火墙管理**：规则增删改、优先级调整
- **快速安装应用**：12个常用应用一键安装
- **积分续期**：使用积分延长服务器到期时间
- **更换/放弃IP**：弹性IP管理

#### 🛒 产品中心
- **产品列表**：云服务器、游戏云、虚拟主机、对象存储、CDN
- **地区分类筛选**：快速跳转到指定地区
- **隐藏缺货选项**：默认隐藏库存为0的套餐
- **RCS购买**：完整购买流程，支持优惠券、时长选择
- **RGS购买**：游戏云购买流程

#### 👤 个人中心
- **我的余额**：余额展示卡片
- **我的优惠券**：卡片式展示，显示到期时间
- **积分中心**：积分任务、积分兑换
- **用户信息**：VIP等级、实名状态

#### 🎁 杂项功能
- **邀请好友**：邀请码/链接分享
- **我的邀请**：邀请记录和奖励统计
- **工具箱**：网络测速、DNS查询、Ping工具

#### 🎨 UI优化
- **底部导航栏**：4Tab设计（服务器、产品、杂项、我的）
- **动画效果**：选中时图标抬高 + 文字显示
- **图标颜色**：菜单图标改为淡蓝色

### 🐛 Bug 修复
- 修复积分任务API参数错误（Name → task_name）
- 修复防火墙规则参数（port → dest_port, source → source_address）
- 修复防火墙移动规则路径（/move → /pos）
- 修复放弃IP路径（/release → /discard）
- 修复优惠券卡片余额属性错误

### 📦 技术改进
- 添加调试日志管理器
- API请求参数规范化
- 错误处理优化

---

## [0.0.1] - 2026-01-06

### ✨ 新增功能

- 🎉 **首次发布**：Rainyun App 第三方客户端正式上线
- 🔐 **用户认证**：基于 API Key 的安全认证系统
- 💻 **全服务器支持**：支持 RCS、RGS、RVH、RBM、RCA、ROS、RCDN 七大产品线
- 📊 **完整功能覆盖**：460+ API 端点全面集成
- 💾 **本地缓存**：使用 Hive 实现服务器信息的本地缓存
- 🌐 **Supabase 集成**：云端数据同步和用户认证
- 🎨 **Material Design**：现代化 UI 设计
- 🌙 **主题支持**：亮色和暗色主题

### 📦 API 集成 (460+ 端点)

基于雨云官方 API 文档（llms.txt），已完整集成所有功能模块：

#### 🛍️ 产品管理 (Product - 12 端点)
- 产品汇总和使用情况
- 产品 ID 列表查询
- 积分续费功能
- 快速安装 APP 列表
- 产品任务日志
- 可用区查询
- 面板配置管理（8 个端点）
- 拼团功能（5 个端点）

#### 🌐 域名管理 (Domain - 38 端点)
- 域名列表和详情
- 域名证书下载
- DNS 解析记录（增删改查）
- DNSSEC 管理（4 个端点）
- 域名锁定/解锁
- NS 服务器管理
- 域名续费和过户
- 域名认证和验证
- 域名注册和检查
- 免费二级域名（4 个端点）
- 域名模板管理（4 个端点）
- 域名白名单
- 域名管理密码
- WHOIS 信息查询

#### 👤 用户管理 (User - 40 端点)
- 用户信息查询和编辑
- 登录/登出/注册
- 用户日志查询
- 二次验证（2FA）
- 站内消息管理
- 密码重置
- **实名认证**（5 个端点）
- **VIP 系统**（14 个端点）
  - VIP 配置和等级
  - 代理认证和定价
  - 优惠券发放和管理
  - 销售收益报表
  - 下级用户管理
  - 神人榜
- **优惠券**（3 个端点）
- **积分奖励**（7 个端点）
  - 积分兑换
  - 积分任务
  - 提现申请

#### ☁️ RCS - 云服务器 (46 端点)
- 服务器列表和详情
- 创建和删除
- 备份管理（5 个端点）
- 桥接网络配置
- 系统重装
- 弹性云盘管理
- IP 地址管理（4 个端点）
- 快速 APP 安装
- 防火墙规则（4 个端点）
- 监控数据查询
- NAT 端口映射
- 服务器操作（开关机/重启）
- 续费和自动续费
- 密码重置
- 流量充值和限流
- 升级配置
- VNC 连接
- 子网管理（2 个端点）
- 折扣和价格查询
- 操作系统列表
- 套餐列表
- 使用情况统计

#### 🎮 RGS - 游戏云 (60 端点)
- 服务器列表和详情
- MP 服务器管理（2 个端点）
- 创建和删除
- 备份管理（5 个端点）
- 桥接网络配置
- 系统重装
- CPU 充电
- 限制模式和日付模式
- IP 地址管理（4 个端点）
- 快速 APP 安装
- 监控数据查询
- NAT 端口映射
- 服务器操作（开关机/重启）
- 续费和自动续费
- 密码重置
- 升级配置
- VNC 连接
- 子网管理（2 个端点）
- Egg（游戏类型）管理（4 个端点）
- 折扣和价格查询
- PAL 配置（2 个端点）
- 面板用户管理（4 个端点）
- SFTP 初始化
- 开服和服务器信息
- 操作系统列表
- 套餐列表
- 翼龙面板用户管理（5 个端点）
- 使用情况统计

#### 🖥️ RBM - 裸金属服务器 (20 端点)
- 服务器列表和创建
- BIOS 刷写
- 系统重装
- 配置清点
- IP 地址管理（4 个端点）
- 服务器释放
- KVM 管理（2 个端点）
- 监控数据
- 服务器操作（开关机）
- IPMI 密码重置
- 流量管理（3 个端点）
- 价格计算
- 使用情况列表

#### 🏠 RVH - 虚拟主机 (20 端点)
- 主机列表和详情
- 创建和删除
- 备份管理（4 个端点）
- 独立 IP 附加
- 宝塔主机管理（2 个端点）
- 域名绑定/解绑
- 密码重置
- 防火墙管理（2 个端点）
- 维护模式
- 系统重装
- 折扣和续费
- 自动续费
- 升级配置
- 套餐和价格
- 标签设置

#### 📦 ROS - 对象存储 (20 端点)
- 存储桶管理（8 个端点）
  - 列表和创建
  - 详情和删除
  - 监控数据
  - Proxy 设置
  - 密钥重新生成
  - 匿名访问控制
- 实例管理（12 个端点）
  - 列表和创建
  - 详情查询
  - 密钥重新生成
  - 续费和自动续费
  - 容量调整
  - 标签设置
  - 弹性计费
  - 匿名访问
  - 套餐和价格
  - 折扣查询

#### 🚀 RCDN - CDN 加速 (22 端点)
- 监控数据
- 折扣查询
- 加速域名管理（5 个端点）
  - 列表和创建
  - 详情和删除
  - 防御设置
  - 使用情况
- 实例管理（17 个端点）
  - 列表和创建
  - 详情查询
  - 缓存清理
  - 续费和自动续费
  - 容量调整
  - 配置设置
  - SSL 绑定
  - 标签设置
  - 弹性计费
  - 使用情况
  - 套餐和价格

#### 📱 RCA - 云应用 (56 端点)
- **App 管理**（14 个端点）
  - App 列表和安装
  - 详情和卸载
  - 配置管理
  - 指标监控
  - MySQL/PHP/Redis 配置
  - 服务列表
  - 启动/停止/重启
  - 版本升级
- **Service 管理**（3 个端点）
  - 创建/删除/更新服务
- **AppStore 管理**（13 个端点）
  - 商店列表和模板管理
  - 版本管理（7 个端点）
  - 提交和取消提交
- **Project 管理**（10 个端点）
  - 项目列表和创建
  - 销毁和监控
  - 备份设置
  - 磁盘扩容
  - IP 地址管理
  - SFTP 设置
- **Website 管理**（8 个端点）
  - 网站创建和删除
  - Nginx 配置
  - PHP 配置
  - 访问设置
  - 重写规则
- **Root 功能**（8 个端点）
  - 产品开通状态
  - 雨点余额和购买
  - 消费历史
  - 套餐列表
  - 使用情况
  - 区域信息

#### 🔒 SSL 证书 (15 端点)
- 证书列表
- 证书上传/查看/替换/删除
- 证书申请管理（3 个端点）
- 证书订单管理（8 个端点）
  - 订单列表和创建
  - 订单信息
  - 证书添加和获取
  - 订单验证
  - 产品列表
  - 描述更新

#### 🎫 工单系统 (14 端点)
- 工单列表和详情
- 创建工单
- 产品授权（3 个端点）
- 工单回复和编辑
- 工单评分（3 个端点）
- 状态管理（2 个端点）
- 提示词列表
- 工单汇总
- 图片上传
- 工单转接（3 个端点）

#### 💰 费用管理 (11 端点)
- 产品转移时长
- 退订操作
- **订单管理**（2 个端点）
  - 订单列表
  - 订单支付
- **发票管理**（7 个端点）
  - 发票申请列表
  - 开具和换开发票
  - 发票下载
  - 发票抬头管理（3 个端点）

#### 🌍 公共接口 (6 端点)
- 页面信息
- 论坛数据
- 公告查询
- 参数缩短（2 个端点）
- 节点网络状态

### 🛠️ 技术实现

- **状态管理**：Riverpod 2.4.10
- **网络请求**：Dio 5.4.1
- **本地存储**：Hive 2.2.3
- **数据模型**：Freezed 2.5.2 + json_serializable 6.8.0
- **后端服务**：Supabase Flutter 2.8.4
- **图表组件**：fl_chart 0.64.0

### 🔧 配置优化

- **Android 配置**
  - 应用名称：Rainyun App
  - 包名：com.summer.rainyun3rd
  - 最低 SDK：21 (Android 5.0)
  - 编译 SDK：34
  - 网络权限配置
  - 网络安全策略配置
  - 阿里云 Maven 镜像加速

- **应用图标**
  - 1024x1024 高清图标
  - 自适应图标支持
  - Android/iOS 全平台支持

- **启动页**
  - 云图标 + 应用名称
  - 加载动画
  - 深色/浅色主题适配

### 🐛 Bug 修复

- ✅ 修复应用启动时的闪退问题
- ✅ 修复图标裁剪显示异常
- ✅ 修复 Supabase 初始化异常捕获
- ✅ 修复 Hive 存储初始化错误处理
- ✅ 修复网络权限配置问题
- ✅ 修复 Java 版本兼容性问题（使用 Java 17）

### 📝 文档

- ✅ 添加完整的 README.md
- ✅ 添加 SUPABASE_SETUP.md 数据库设计文档
- ✅ 添加 API 常量和端点定义
- ✅ 添加项目架构说明

### 🔐 安全性

- Supabase RLS（行级安全策略）配置
- API Key 本地加密存储
- HTTPS 强制加密传输
- 网络安全配置（network_security_config.xml）
- 数据库函数安全策略优化

### 🎯 已知问题

- 部分服务器类型的详细管理功能尚未实现
- 暂未实现服务器操作功能（重启、关机等）
- 图表监控功能待开发
- 推送通知功能待实现

### 🚀 未来计划

- [ ] 实现服务器控制功能
- [ ] 添加实时监控图表
- [ ] 支持多账号切换
- [ ] 实现消息推送
- [ ] 添加小组件支持
- [ ] 优化性能和加载速度
- [ ] 增加更多主题选项
- [ ] 支持国际化（i18n）

---

## 版本说明

- **[Unreleased]** - 开发中的功能
- **[0.1.0]** - 2026-01-06 - 首个公开测试版本

---

## 贡献者

- **Summer** - 项目发起人和主要开发者

---

<div align="center">
  <p>感谢您使用 Rainyun App！</p>
</div>
